<!DOCTYPE html>
<html>
<head>
	<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous">
    </script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script type="text/javascript" src="/../data/friends.js"></script>
	<title>FRIEND FINDER</title>

</head>

<body>
	<div class="container">
		<div class="row">
			<div class="col-lg-12">
			<h1>FRIEND FINDER</h1>
			<br>


				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 class="panel-title"><strong>Start survey</strong></h3>
					</div>
					<div class="panel-body">
						<form method="POST" role="form">

							<div class="form-group">
								<label for="name">Enter your name:</label>
								<input type="text" class="form-control" id="name" class="textinput">
							</div>

							<div class="form-group">
							<label for="photo">Enter a url to your photo:</label>
								<input type="text" class="form-control" id="photo" class="textinput">
							</div>


							<div class="form-group">
								<label for="q1">QUESTION 1</label>
								<select id="q1">
									<option value="1">1 (Strongly Disagree)</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
									<option value="5">5 (Strongly Agree)</option>
								</select>
								

							</div>

							<div class="form-group">
								<label for="q2">QUESTION 2</label>
								<select id="q2">
									<option value="1">1 (Strongly Disagree)</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
									<option value="5">5 (Strongly Agree)</option>
								</select>
							</div>

							<div class="form-group">
								<label for="q3">QUESTION 3</label>
								<select id="q3">
									<option value="1">1 (Strongly Disagree)</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
									<option value="5">5 (Strongly Agree)</option>
								</select>
							</div>

							<div class="form-group">
								<label for="q4">QUESTION 4</label>
								<select id="q4">
									<option value="1">1 (Strongly Disagree)</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
									<option value="5">5 (Strongly Agree)</option>
								</select>
							</div>
							<div class="form-group">
								<label for="q5">QUESTION 5</label>
								<select id="q5">
									<option value="1">1 (Strongly Disagree)</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
									<option value="5">5 (Strongly Agree)</option>
								</select>
							</div>
							<div class="form-group">
								<label for="q6">QUESTION 6</label>
								<select id="q6">
									<option value="1">1 (Strongly Disagree)</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
									<option value="5">5 (Strongly Agree)</option>
								</select>
							</div>
							<div class="form-group">
								<label for="q7">QUESTION 7</label>
								<select id="q7">
									<option value="1">1 (Strongly Disagree)</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
									<option value="5">5 (Strongly Agree)</option>
								</select>
							</div>
							<div class="form-group">
								<label for="q8">QUESTION 8</label>
								<select id="q8">
									<option value="1">1 (Strongly Disagree)</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
									<option value="5">5 (Strongly Agree)</option>
								</select>
							</div>

							<div class="form-group">
								<label for="q9">QUESTION 9</label>
								<select id="q9">
									<option value="1">1 (Strongly Disagree)</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
									<option value="5">5 (Strongly Agree)</option>
								</select>
							</div>

							<div class="form-group">
								<label for="q10">QUESTION 10</label>
								<select id="q10">
									<option value="1">1 (Strongly Disagree)</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
									<option value="5">5 (Strongly Agree)</option>
								</select>
							</div>

						</form>
					</div>
				
					<button type="submit" id="submitBtn">BEGIN</button>
				</div>
			</div>
		</div>

		<div class="modal-content" id="friendModal">

			<div class="modal-header">
				<button type="button" class="close" data-dismsis="modal">&times;</button>
				<h4 class="modal-title">YOUR MATCH</h4>

			</div>
			<div class="modal-body">
				<h5 id="friendName"></h5>
				<img src="" class="img-responive" id="friendPhoto">
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>



</body>
</html>

<script type="text/javascript">
window.onload = (function() {


$("#submitBtn").on("click", function (event) {
	event.preventDefault();

	function validation () {
		var formComplete = true;

		$('.textinput').each(function(){
			if($(this).val() === "") {
					formComplete = false;
			}

		});

		$('select').each(function() {
			if($(this).val() === null) {
				formComplete = false;
			}
		});

		return formComplete;
	}




	if (validation() === true) {

	var newFriend = {
		name: $("#name").val().trim(),
		photo: $('#photo').val().trim(),
		scores: [$('#q1').val(), $('#q2').val(), $('#q3').val(), $('#q4').val(), $('#q5').val(), $('#q6').val(), $('#q7').val(), $('#q8').val(), $('#q9').val(), $('#q10').val(),]
	}
	console.log(newFriend);

	var url = window.location.origin;

	$.post(currentURL+"/api/friends", newFriend,
		function(data) {
			console.log('ok');
			$('#friendModal').modal('open');

		});
	
	
	}	
})


};



</script>